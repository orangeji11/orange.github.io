{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"daily-notes \u00b6 \u4ecb\u7ecd \u00b6 \u6b64\u4ed3\u5e93\u7528\u6765\u6bcf\u65e5\u8bb0\u5f55\u65e5\u5e38\u5de5\u4f5c\u4e2d\u7684\u96f6\u96f6\u6563\u6563\u7684\u4e1c\u897f\u3002","title":"daily-notes"},{"location":"#daily-notes","text":"","title":"daily-notes"},{"location":"%E6%9C%89%E6%A0%88/%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/","text":"\u95ee\u9898\u6c47\u603b \u00b6 \u8282\u70b9\u91cd\u542f\u4fee\u590d\u78c1\u76d8\u6302\u8f7d\u95ee\u9898 \u00b6 \u8fde\u63a5\u63a7\u5236\u8282\u70b915.11 source ~/admin-openrc openstack server show <instance_id> \u627e\u5230\u6302\u8f7d\u5377volumes_attached\u7684 1. \u8fde\u63a5compute3\u6267\u884c\u4fee\u590d\u811a\u672c ssh compute3 sh fix_device.sh <disk_id> \u91cd\u542f\u8bbe\u5907\u3002","title":"\u95ee\u9898\u6c47\u603b"},{"location":"%E6%9C%89%E6%A0%88/%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/#_1","text":"","title":"\u95ee\u9898\u6c47\u603b"},{"location":"%E6%9C%89%E6%A0%88/%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/#_2","text":"\u8fde\u63a5\u63a7\u5236\u8282\u70b915.11 source ~/admin-openrc openstack server show <instance_id> \u627e\u5230\u6302\u8f7d\u5377volumes_attached\u7684 1. \u8fde\u63a5compute3\u6267\u884c\u4fee\u590d\u811a\u672c ssh compute3 sh fix_device.sh <disk_id> \u91cd\u542f\u8bbe\u5907\u3002","title":"\u8282\u70b9\u91cd\u542f\u4fee\u590d\u78c1\u76d8\u6302\u8f7d\u95ee\u9898"},{"location":"%E6%9C%89%E9%9B%80/v1.2/%E6%89%A9%E5%B1%95%E7%BB%84%E4%BB%B6%E6%B5%8B%E8%AF%95/%E7%BB%84%E4%BB%B6%E6%B5%8B%E8%AF%95/","text":"\u7ec4\u4ef6\u6d4b\u8bd5 \u00b6","title":"\u7ec4\u4ef6\u6d4b\u8bd5"},{"location":"%E6%9C%89%E9%9B%80/v1.2/%E6%89%A9%E5%B1%95%E7%BB%84%E4%BB%B6%E6%B5%8B%E8%AF%95/%E7%BB%84%E4%BB%B6%E6%B5%8B%E8%AF%95/#_1","text":"","title":"\u7ec4\u4ef6\u6d4b\u8bd5"},{"location":"%E6%9C%89%E9%9B%80/%E5%85%B6%E4%BB%96/mkdocs/%E6%9E%84%E5%BB%BAmd%E5%AE%B9%E5%99%A8%E5%BA%94%E7%94%A8/","text":"\u6784\u5efa\u5bb9\u5668\u5e94\u7528 \u00b6 \u672c\u5730\u73af\u5883\u5b89\u88c5mkdocs \u00b6 pip install mkdocs \u521b\u5efa\u65b0\u9879\u76ee\uff0c\u5c06\u5df2\u6709\u6587\u4ef6\u79fb\u52a8\u81f3docs\u76ee\u5f55 \u00b6 mkdocs new . mkdocs serve \u5f15\u7528\u6a21\u677ffrom \u00b6 https://github.com/IBM/mkdocs-oc-pipeline.git","title":"\u6784\u5efa\u5bb9\u5668\u5e94\u7528"},{"location":"%E6%9C%89%E9%9B%80/%E5%85%B6%E4%BB%96/mkdocs/%E6%9E%84%E5%BB%BAmd%E5%AE%B9%E5%99%A8%E5%BA%94%E7%94%A8/#_1","text":"","title":"\u6784\u5efa\u5bb9\u5668\u5e94\u7528"},{"location":"%E6%9C%89%E9%9B%80/%E5%85%B6%E4%BB%96/mkdocs/%E6%9E%84%E5%BB%BAmd%E5%AE%B9%E5%99%A8%E5%BA%94%E7%94%A8/#mkdocs","text":"pip install mkdocs","title":"\u672c\u5730\u73af\u5883\u5b89\u88c5mkdocs"},{"location":"%E6%9C%89%E9%9B%80/%E5%85%B6%E4%BB%96/mkdocs/%E6%9E%84%E5%BB%BAmd%E5%AE%B9%E5%99%A8%E5%BA%94%E7%94%A8/#docs","text":"mkdocs new . mkdocs serve","title":"\u521b\u5efa\u65b0\u9879\u76ee\uff0c\u5c06\u5df2\u6709\u6587\u4ef6\u79fb\u52a8\u81f3docs\u76ee\u5f55"},{"location":"%E6%9C%89%E9%9B%80/%E5%85%B6%E4%BB%96/mkdocs/%E6%9E%84%E5%BB%BAmd%E5%AE%B9%E5%99%A8%E5%BA%94%E7%94%A8/#from","text":"https://github.com/IBM/mkdocs-oc-pipeline.git","title":"\u5f15\u7528\u6a21\u677ffrom"},{"location":"%E6%9C%89%E9%9B%80/%E9%9C%80%E6%B1%82/%E4%BB%A3%E7%A0%81%E6%89%AB%E6%8F%8F/%E4%BB%A3%E7%A0%81%E6%89%AB%E6%8F%8F/","text":"\u4ee3\u7801\u626b\u63cf \u00b6","title":"\u4ee3\u7801\u626b\u63cf"},{"location":"%E6%9C%89%E9%9B%80/%E9%9C%80%E6%B1%82/%E4%BB%A3%E7%A0%81%E6%89%AB%E6%8F%8F/%E4%BB%A3%E7%A0%81%E6%89%AB%E6%8F%8F/#_1","text":"","title":"\u4ee3\u7801\u626b\u63cf"},{"location":"%E6%9C%89%E9%9B%80/%E9%9C%80%E6%B1%82/%E5%8F%AF%E8%A7%86%E5%8C%96%E9%83%A8%E7%BD%B2/%E5%8F%AF%E8%A7%86%E5%8C%96%E9%83%A8%E7%BD%B2/","text":"\u53ef\u89c6\u5316\u90e8\u7f72 \u00b6","title":"\u53ef\u89c6\u5316\u90e8\u7f72"},{"location":"%E6%9C%89%E9%9B%80/%E9%9C%80%E6%B1%82/%E5%8F%AF%E8%A7%86%E5%8C%96%E9%83%A8%E7%BD%B2/%E5%8F%AF%E8%A7%86%E5%8C%96%E9%83%A8%E7%BD%B2/#_1","text":"","title":"\u53ef\u89c6\u5316\u90e8\u7f72"},{"location":"%E6%9C%89%E9%9B%80/%E9%9C%80%E6%B1%82/%E6%9E%84%E5%BB%BA%E9%9B%86%E6%88%90/1.%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87/","text":"\u73af\u5883\u51c6\u5907 \u00b6 \u5b89\u88c5\u7ba1\u9053 \u00b6 \u5728operatorhub\u5b89\u88c5\u6709\u96c0\u7ba1\u9053\u7ec4\u4ef6 \u5b89\u88c5gitlab \u00b6 operatorhub\u6dfb\u52a0\u6e90redhat-operators apiVersion: \"operators.coreos.com/v1alpha1\" kind: \"CatalogSource\" metadata: name: \"redhat-operators\" namespace: \"openshift-marketplace\" annotations: target.workload.openshift.io/management: '{\"effect\": \"PreferredDuringScheduling\"}' spec: sourceType: grpc image: registry.redhat.io/redhat/redhat-operator-index:v4.10 displayName: \"Red Hat Operators\" publisher: \"Red Hat\" priority: -100 updateStrategy: registryPoll: interval: 10m grpcPodConfig: nodeSelector: node-role.kubernetes.io/master: \"\" kubernetes.io/os: \"linux\" priorityClassName: \"system-cluster-critical\" tolerations: - key: \"node-role.kubernetes.io/master\" operator: Exists effect: \"NoSchedule\" - key: \"node.kubernetes.io/unreachable\" operator: \"Exists\" effect: \"NoExecute\" tolerationSeconds: 120 - key: \"node.kubernetes.io/not-ready\" operator: \"Exists\" effect: \"NoExecute\" tolerationSeconds: 120 operatorhub\u4e2d\u5b89\u88c5cert-manager\u7ec4\u4ef6 \u6dfb\u52a0operatorhub\u5e76\u5728operatorhub\u4e2d\u5b89\u88c5gitlab\u7ec4\u4ef6 apiVersion: \"operators.coreos.com/v1alpha1\" kind: \"CatalogSource\" metadata: name: \"community-operators\" namespace: \"openshift-marketplace\" annotations: target.workload.openshift.io/management: '{\"effect\": \"PreferredDuringScheduling\"}' spec: sourceType: grpc image: registry.redhat.io/redhat/community-operator-index:v4.10 displayName: \"Community Operators\" publisher: \"Red Hat\" priority: -400 updateStrategy: registryPoll: interval: 10m grpcPodConfig: nodeSelector: node-role.kubernetes.io/master: \"\" kubernetes.io/os: \"linux\" priorityClassName: \"system-cluster-critical\" tolerations: - key: \"node-role.kubernetes.io/master\" operator: Exists effect: \"NoSchedule\" - key: \"node.kubernetes.io/unreachable\" operator: \"Exists\" effect: \"NoExecute\" tolerationSeconds: 120 - key: \"node.kubernetes.io/not-ready\" operator: \"Exists\" effect: \"NoExecute\" tolerationSeconds: 120 \u4f7f\u7528\u955c\u50cf\u4ee3\u7406\uff1a + gcr.io \u2013> gcr.lank8s.cn + k8s.gcr.io \u2013> lank8s.cn\\ \u4fee\u6539gitlab\u7ec4\u4ef6manifests gcr.io/kubebuilder/kube-rbac-proxy => gcr.lank8s.cn/kubebuilder/kube-rbac-proxy \u7b49\u5f85\u5b89\u88c5\u5b8c\u6210\u540e\u521b\u5efagitlab\u9879\u76ee apiVersion: apps.gitlab.com/v1beta1 kind: GitLab metadata: name: gitlab namespace: gitlab-system spec: chart: values: certmanager: install: false nginx-ingress: install: false global: hosts: domain: apps.uccps-rc9.jzy.com hostSuffix: null ingress: configureCertmanager: false tls: secretName: null class: none annotations: route.openshift.io/termination: \"edge\" version: 6.8.3 \u521b\u5efa\u8def\u7531\u5e76\u8bbf\u95ee oc expose svc gitlab-webservice-default -n gitlab-system http://gitlab-webservice-default-gitlab-system.apps.uccps-rc9.jzy.com/users/sign_in \u5bc6\u7801\u5728secret gitlab-gitlab-initial-root-password \u4e2d\u4fdd\u5b58","title":"\u73af\u5883\u51c6\u5907"},{"location":"%E6%9C%89%E9%9B%80/%E9%9C%80%E6%B1%82/%E6%9E%84%E5%BB%BA%E9%9B%86%E6%88%90/1.%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87/#_1","text":"","title":"\u73af\u5883\u51c6\u5907"},{"location":"%E6%9C%89%E9%9B%80/%E9%9C%80%E6%B1%82/%E6%9E%84%E5%BB%BA%E9%9B%86%E6%88%90/1.%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87/#_2","text":"\u5728operatorhub\u5b89\u88c5\u6709\u96c0\u7ba1\u9053\u7ec4\u4ef6","title":"\u5b89\u88c5\u7ba1\u9053"},{"location":"%E6%9C%89%E9%9B%80/%E9%9C%80%E6%B1%82/%E6%9E%84%E5%BB%BA%E9%9B%86%E6%88%90/1.%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87/#gitlab","text":"operatorhub\u6dfb\u52a0\u6e90redhat-operators apiVersion: \"operators.coreos.com/v1alpha1\" kind: \"CatalogSource\" metadata: name: \"redhat-operators\" namespace: \"openshift-marketplace\" annotations: target.workload.openshift.io/management: '{\"effect\": \"PreferredDuringScheduling\"}' spec: sourceType: grpc image: registry.redhat.io/redhat/redhat-operator-index:v4.10 displayName: \"Red Hat Operators\" publisher: \"Red Hat\" priority: -100 updateStrategy: registryPoll: interval: 10m grpcPodConfig: nodeSelector: node-role.kubernetes.io/master: \"\" kubernetes.io/os: \"linux\" priorityClassName: \"system-cluster-critical\" tolerations: - key: \"node-role.kubernetes.io/master\" operator: Exists effect: \"NoSchedule\" - key: \"node.kubernetes.io/unreachable\" operator: \"Exists\" effect: \"NoExecute\" tolerationSeconds: 120 - key: \"node.kubernetes.io/not-ready\" operator: \"Exists\" effect: \"NoExecute\" tolerationSeconds: 120 operatorhub\u4e2d\u5b89\u88c5cert-manager\u7ec4\u4ef6 \u6dfb\u52a0operatorhub\u5e76\u5728operatorhub\u4e2d\u5b89\u88c5gitlab\u7ec4\u4ef6 apiVersion: \"operators.coreos.com/v1alpha1\" kind: \"CatalogSource\" metadata: name: \"community-operators\" namespace: \"openshift-marketplace\" annotations: target.workload.openshift.io/management: '{\"effect\": \"PreferredDuringScheduling\"}' spec: sourceType: grpc image: registry.redhat.io/redhat/community-operator-index:v4.10 displayName: \"Community Operators\" publisher: \"Red Hat\" priority: -400 updateStrategy: registryPoll: interval: 10m grpcPodConfig: nodeSelector: node-role.kubernetes.io/master: \"\" kubernetes.io/os: \"linux\" priorityClassName: \"system-cluster-critical\" tolerations: - key: \"node-role.kubernetes.io/master\" operator: Exists effect: \"NoSchedule\" - key: \"node.kubernetes.io/unreachable\" operator: \"Exists\" effect: \"NoExecute\" tolerationSeconds: 120 - key: \"node.kubernetes.io/not-ready\" operator: \"Exists\" effect: \"NoExecute\" tolerationSeconds: 120 \u4f7f\u7528\u955c\u50cf\u4ee3\u7406\uff1a + gcr.io \u2013> gcr.lank8s.cn + k8s.gcr.io \u2013> lank8s.cn\\ \u4fee\u6539gitlab\u7ec4\u4ef6manifests gcr.io/kubebuilder/kube-rbac-proxy => gcr.lank8s.cn/kubebuilder/kube-rbac-proxy \u7b49\u5f85\u5b89\u88c5\u5b8c\u6210\u540e\u521b\u5efagitlab\u9879\u76ee apiVersion: apps.gitlab.com/v1beta1 kind: GitLab metadata: name: gitlab namespace: gitlab-system spec: chart: values: certmanager: install: false nginx-ingress: install: false global: hosts: domain: apps.uccps-rc9.jzy.com hostSuffix: null ingress: configureCertmanager: false tls: secretName: null class: none annotations: route.openshift.io/termination: \"edge\" version: 6.8.3 \u521b\u5efa\u8def\u7531\u5e76\u8bbf\u95ee oc expose svc gitlab-webservice-default -n gitlab-system http://gitlab-webservice-default-gitlab-system.apps.uccps-rc9.jzy.com/users/sign_in \u5bc6\u7801\u5728secret gitlab-gitlab-initial-root-password \u4e2d\u4fdd\u5b58","title":"\u5b89\u88c5gitlab"},{"location":"%E6%9C%89%E9%9B%80/%E9%9C%80%E6%B1%82/%E6%9E%84%E5%BB%BA%E9%9B%86%E6%88%90/2.%E6%9E%84%E5%BB%BA%E6%B5%8B%E8%AF%95/","text":"\u6784\u5efa\u6d4b\u8bd5 \u00b6 \u6d4b\u8bd5\u89e6\u53d1\u5668 \u00b6 \u9009\u62e9Gitlab New Project \u8f93\u5165\u5730\u5740\u3001\u7528\u6237\u540d\u3001\u5bc6\u7801\u540e\u6210\u529f\u5bfc\u5165https://gitee.com/orange19961/helloworld-java \u4ece\u7ba1\u9053\u53f3\u4fa7\u6dfb\u52a0\u89e6\u53d1\u5668(\u53ef\u9009) \u7c7b\u578b\u9009\u62e9gitlab-push \u4ed3\u5e93\u4e2d\u6dfb\u52a0webhooks \u4fa7\u8fb9\u680f\u8bbe\u7f6e\u4e2d\u70b9\u51fbwebhook\uff0curl\u586b\u5165\u6784\u5efa\u7684\u89e6\u53d1\u5730\u5740\u6216\u7ba1\u9053\u89e6\u53d1\u5668\u7684url\uff0c\u82e5\u586b\u5165\u4e86\u6784\u5efa\u7684\u89e6\u53d1\u5730\u5740\uff0cSecret \u4ee4\u724c\u586b\u5165\u76f8\u5bf9\u5e94\u7684Secret\u7684WebHookSecretKey\u7684\u503c\uff0c\u53d6\u6d88\u52fe\u9009\u542f\u7528SSL\u9a8c\u8bc1\u540e\u6dfb\u52a0webhook\u3002 \u70b9\u51fb\u6d4b\u8bd5\u63a8\u9001\uff0c\u56de\u5230\u96c6\u7fa4console\u53d1\u73b0\u5df2\u89e6\u53d1\u6784\u5efa\u3002 \u95ee\u9898\u89e3\u51b3 \u00b6 \u6dfb\u52a0webhook\u65f6\u62a5\u9519\uff1aUrl is blocked: Requests to the local network are not allowed \u5df2\u89e3\u51b3\uff1a\u4f7f\u7528root\u8d26\u53f7\u767b\u5f55\u540e\uff0c\u5de6\u4e0a\u89d2\u70b9\u51fb\u7ba1\u7406\u5458\uff0c\u9009\u4e2d\u8bbe\u7f6e\u91cc\u7684\u7f51\u7edc\uff0c\u9009\u4e2d\u51fa\u6218\u8bf7\u6c42\u5c55\u5f00\uff0c\u52fe\u9009\u201c\u5141\u8bb8\u6765\u81ea web hooks \u548c\u670d\u52a1\u5bf9\u672c\u5730\u7f51\u7edc\u7684\u8bf7\u6c42\u201d\u540e\u4fdd\u5b58\u66f4\u6539\u3002","title":"\u6784\u5efa\u6d4b\u8bd5"},{"location":"%E6%9C%89%E9%9B%80/%E9%9C%80%E6%B1%82/%E6%9E%84%E5%BB%BA%E9%9B%86%E6%88%90/2.%E6%9E%84%E5%BB%BA%E6%B5%8B%E8%AF%95/#_1","text":"","title":"\u6784\u5efa\u6d4b\u8bd5"},{"location":"%E6%9C%89%E9%9B%80/%E9%9C%80%E6%B1%82/%E6%9E%84%E5%BB%BA%E9%9B%86%E6%88%90/2.%E6%9E%84%E5%BB%BA%E6%B5%8B%E8%AF%95/#_2","text":"\u9009\u62e9Gitlab New Project \u8f93\u5165\u5730\u5740\u3001\u7528\u6237\u540d\u3001\u5bc6\u7801\u540e\u6210\u529f\u5bfc\u5165https://gitee.com/orange19961/helloworld-java \u4ece\u7ba1\u9053\u53f3\u4fa7\u6dfb\u52a0\u89e6\u53d1\u5668(\u53ef\u9009) \u7c7b\u578b\u9009\u62e9gitlab-push \u4ed3\u5e93\u4e2d\u6dfb\u52a0webhooks \u4fa7\u8fb9\u680f\u8bbe\u7f6e\u4e2d\u70b9\u51fbwebhook\uff0curl\u586b\u5165\u6784\u5efa\u7684\u89e6\u53d1\u5730\u5740\u6216\u7ba1\u9053\u89e6\u53d1\u5668\u7684url\uff0c\u82e5\u586b\u5165\u4e86\u6784\u5efa\u7684\u89e6\u53d1\u5730\u5740\uff0cSecret \u4ee4\u724c\u586b\u5165\u76f8\u5bf9\u5e94\u7684Secret\u7684WebHookSecretKey\u7684\u503c\uff0c\u53d6\u6d88\u52fe\u9009\u542f\u7528SSL\u9a8c\u8bc1\u540e\u6dfb\u52a0webhook\u3002 \u70b9\u51fb\u6d4b\u8bd5\u63a8\u9001\uff0c\u56de\u5230\u96c6\u7fa4console\u53d1\u73b0\u5df2\u89e6\u53d1\u6784\u5efa\u3002","title":"\u6d4b\u8bd5\u89e6\u53d1\u5668"},{"location":"%E6%9C%89%E9%9B%80/%E9%9C%80%E6%B1%82/%E6%9E%84%E5%BB%BA%E9%9B%86%E6%88%90/2.%E6%9E%84%E5%BB%BA%E6%B5%8B%E8%AF%95/#_3","text":"\u6dfb\u52a0webhook\u65f6\u62a5\u9519\uff1aUrl is blocked: Requests to the local network are not allowed \u5df2\u89e3\u51b3\uff1a\u4f7f\u7528root\u8d26\u53f7\u767b\u5f55\u540e\uff0c\u5de6\u4e0a\u89d2\u70b9\u51fb\u7ba1\u7406\u5458\uff0c\u9009\u4e2d\u8bbe\u7f6e\u91cc\u7684\u7f51\u7edc\uff0c\u9009\u4e2d\u51fa\u6218\u8bf7\u6c42\u5c55\u5f00\uff0c\u52fe\u9009\u201c\u5141\u8bb8\u6765\u81ea web hooks \u548c\u670d\u52a1\u5bf9\u672c\u5730\u7f51\u7edc\u7684\u8bf7\u6c42\u201d\u540e\u4fdd\u5b58\u66f4\u6539\u3002","title":"\u95ee\u9898\u89e3\u51b3"},{"location":"%E6%9C%89%E9%9B%80/%E9%9C%80%E6%B1%82/%E6%9E%84%E5%BB%BA%E9%9B%86%E6%88%90/3.%E9%87%8D%E5%BB%BA%E5%AE%B9%E5%99%A8/","text":"","title":"3.\u91cd\u5efa\u5bb9\u5668"},{"location":"%E6%9C%89%E9%9B%80/%E9%9C%80%E6%B1%82/%E6%9E%84%E5%BB%BA%E9%9B%86%E6%88%90/%E6%9E%84%E5%BB%BA%E6%B5%81%E7%A8%8B%E5%9B%BE/","text":"graph LR A[\u89e6\u53d1\u96c6\u6210] -->B(\u514b\u9686\u4ee3\u7801) B --> C[\u83b7\u53d6\u6e90\u53ca\u76ee\u6807\u955c\u50cf\u5217\u8868] C --> D[\u68c0\u67e5\u6e90\u955c\u50cf] D --> E[manifests\u955c\u50cf\u6784\u5efa\u53ca\u63a8\u9001] E --> F[\u68c0\u67e5\u76ee\u6807\u955c\u50cf] F --> G[\u7ed3\u675f] Z[\u96c6\u6210\u6d41\u7a0b\u56fe]","title":"\u6784\u5efa\u6d41\u7a0b\u56fe"},{"location":"%E6%9C%89%E9%9B%80/%E9%9C%80%E6%B1%82/%E6%9E%84%E5%BB%BA%E9%9B%86%E6%88%90/%E9%9B%86%E6%88%90%E6%B5%81%E7%A8%8B%E5%9B%BE/","text":"graph LR A[\u514b\u9686\u4ee3\u7801] -->B(\u4ee3\u7801\u626b\u63cf) \u200b B --> C{\u626b\u63cf\u7ed3\u679c} \u200b C -->|\u901a\u8fc7| D[\u955c\u50cf\u6784\u5efa] \u200b C -->|\u672a\u901a\u8fc7| E[\u6d41\u7a0b\u7ed3\u675f] \u200b D --> F[\u955c\u50cf\u63a8\u9001] --> G[\u955c\u50cf\u68c0\u67e5] \u200b \u200b J[\u955c\u50cf\u6784\u5efa] -->K[\u514b\u9686\u4ee3\u7801] \u200b K --> T[prebuild] \u200b T --> L[\u8fdc\u7a0b\u7f16\u8bd1podman-remote] \u200b L --> M[x86\u7f16\u8bd1\u673a] \u200b L --> N[arm\u7f16\u8bd1\u673a] \u200b L --> O[\u9f99\u82af\u7f16\u8bd1\u673a] \u200b M --> P[\u68c0\u6d4b\u8fdc\u7a0b\u955c\u50cf] \u200b N --> P[\u68c0\u6d4b\u8fdc\u7a0b\u955c\u50cf] \u200b O --> P[\u68c0\u6d4b\u8fdc\u7a0b\u955c\u50cf] \u200b P --> R[post-build] --> S[\u7ed3\u675f] Z[\u81ea\u6784\u5efa\u6d41\u7a0b\u56fe]","title":"\u96c6\u6210\u6d41\u7a0b\u56fe"},{"location":"%E6%9C%89%E9%9B%80/%E9%9C%80%E6%B1%82/%E7%94%B3%E5%A8%81%E9%80%82%E9%85%8D/%E9%80%82%E9%85%8De%E7%89%88/","text":"\u9002\u914de\u7248 \u00b6 \u68b3\u7406\u7f3a\u5c11\u7684\u5305\u5217\u8868 \u00b6 \u6765\u81ea\u7cfb\u7edf\u5b89\u88c5 \u00b6 buildah criu fuse-overlayfs go-bindata golang >= 18 goversioninfo cri-tools libslirp podman runc skopeo slirp4netns crun \u6765\u81ea\u5bb9\u5668\u5b89\u88c5 \u00b6 uos20 systemd-journal-remote python3-pip-wheel uos-release coreutils-single platform-python python3-setuptools-wheel glibc-minimal-langpack platform-python-setuptools python3-syspurpose libssh-config langpacks-en alibaba-cloud-csi-driver tzdata baremetal-runtimecfg dhclient docker-builder fuse-overlayfs cluster-node-tuning-operator tuned-profiles-atomic tuned-profiles-cpu-partitioning tuned-profiles-mssql tuned-profiles-nfv tuned-profiles-nfv-guest tuned-profiles-nfv-host tuned-profiles-openshift tuned-profiles-oracle tuned-profiles-postgresql tuned-profiles-realtime tuned-profiles-sap tuned-profiles-sap-hana tuned-profiles-spectrumscale nmap-ncat stalld keepalived-ipfailover nmap-ncat baremetal-installer baremetal ironic-hardware-inventory-recorder openstack-ironic-python-agent python3-hardware kuryr-cni openvswitch network-tools nginx tools wireshark glibc-utils nmap-ncat fio ovn-kubernetes firewalld-filesystem iproute-tc sdn nmap-ncat utccp\u76f8\u5173\u5305 \u00b6 openvswitch2.16 openvswitch-selinux-extra-policy cri-o utccp utccp-clients utccp-helm utccp-ignition utccp-install utccp-kuryr utccp-odo","title":"\u9002\u914de\u7248"},{"location":"%E6%9C%89%E9%9B%80/%E9%9C%80%E6%B1%82/%E7%94%B3%E5%A8%81%E9%80%82%E9%85%8D/%E9%80%82%E9%85%8De%E7%89%88/#e","text":"","title":"\u9002\u914de\u7248"},{"location":"%E6%9C%89%E9%9B%80/%E9%9C%80%E6%B1%82/%E7%94%B3%E5%A8%81%E9%80%82%E9%85%8D/%E9%80%82%E9%85%8De%E7%89%88/#_1","text":"","title":"\u68b3\u7406\u7f3a\u5c11\u7684\u5305\u5217\u8868"},{"location":"%E6%9C%89%E9%9B%80/%E9%9C%80%E6%B1%82/%E7%94%B3%E5%A8%81%E9%80%82%E9%85%8D/%E9%80%82%E9%85%8De%E7%89%88/#_2","text":"buildah criu fuse-overlayfs go-bindata golang >= 18 goversioninfo cri-tools libslirp podman runc skopeo slirp4netns crun","title":"\u6765\u81ea\u7cfb\u7edf\u5b89\u88c5"},{"location":"%E6%9C%89%E9%9B%80/%E9%9C%80%E6%B1%82/%E7%94%B3%E5%A8%81%E9%80%82%E9%85%8D/%E9%80%82%E9%85%8De%E7%89%88/#_3","text":"uos20 systemd-journal-remote python3-pip-wheel uos-release coreutils-single platform-python python3-setuptools-wheel glibc-minimal-langpack platform-python-setuptools python3-syspurpose libssh-config langpacks-en alibaba-cloud-csi-driver tzdata baremetal-runtimecfg dhclient docker-builder fuse-overlayfs cluster-node-tuning-operator tuned-profiles-atomic tuned-profiles-cpu-partitioning tuned-profiles-mssql tuned-profiles-nfv tuned-profiles-nfv-guest tuned-profiles-nfv-host tuned-profiles-openshift tuned-profiles-oracle tuned-profiles-postgresql tuned-profiles-realtime tuned-profiles-sap tuned-profiles-sap-hana tuned-profiles-spectrumscale nmap-ncat stalld keepalived-ipfailover nmap-ncat baremetal-installer baremetal ironic-hardware-inventory-recorder openstack-ironic-python-agent python3-hardware kuryr-cni openvswitch network-tools nginx tools wireshark glibc-utils nmap-ncat fio ovn-kubernetes firewalld-filesystem iproute-tc sdn nmap-ncat","title":"\u6765\u81ea\u5bb9\u5668\u5b89\u88c5"},{"location":"%E6%9C%89%E9%9B%80/%E9%9C%80%E6%B1%82/%E7%94%B3%E5%A8%81%E9%80%82%E9%85%8D/%E9%80%82%E9%85%8De%E7%89%88/#utccp","text":"openvswitch2.16 openvswitch-selinux-extra-policy cri-o utccp utccp-clients utccp-helm utccp-ignition utccp-install utccp-kuryr utccp-odo","title":"utccp\u76f8\u5173\u5305"},{"location":"%E6%9C%89%E9%9B%80/%E9%9C%80%E6%B1%82/%E7%A6%BB%E7%BA%BF%E6%96%87%E6%A1%A3/%E7%A6%BB%E7%BA%BF%E6%96%87%E6%A1%A3/","text":"\u79bb\u7ebf\u6587\u6863 \u00b6","title":"\u79bb\u7ebf\u6587\u6863"},{"location":"%E6%9C%89%E9%9B%80/%E9%9C%80%E6%B1%82/%E7%A6%BB%E7%BA%BF%E6%96%87%E6%A1%A3/%E7%A6%BB%E7%BA%BF%E6%96%87%E6%A1%A3/#_1","text":"","title":"\u79bb\u7ebf\u6587\u6863"},{"location":"%E6%9C%89%E9%9B%80/%E9%9C%80%E6%B1%82/%E8%B7%AF%E7%94%B1%E5%90%8D%E7%A7%B0%E6%9B%BF%E6%8D%A2/%E6%90%AD%E5%BB%BA%E6%B5%8B%E8%AF%95/","text":"\u6709\u96c0\u642d\u5efa \u00b6 \u521b\u5efa\u5b89\u88c5\u914d\u7f6e \u00b6 \u521b\u5efa\u5b89\u88c5\u914d\u7f6einstall-config.yaml\u6587\u4ef6\u5982\u4e0b\uff1a apiVersion: v1 baseDomain: jzy.com compute: - architecture: amd64 hyperthreading: Enabled name: worker platform: openstack: zones: ['nova'] type: uccps.small replicas: 2 controlPlane: architecture: amd64 hyperthreading: Enabled name: master platform: openstack: zones: ['nova'] type: uccps.middle replicas: 3 metadata: creationTimestamp: null name: uccps-ns networking: clusterNetwork: - cidr: 10.128.0.0/14 hostPrefix: 23 machineNetwork: - cidr: 10.67.0.0/16 networkType: OpenShiftSDN serviceNetwork: - 172.30.0.0/16 platform: openstack: apiFloatingIP: 10.10.15.120 apiVIP: 10.67.0.5 cloud: openstack clusterOSImage: uswift-20230203-uccps-x86_64 defaultMachinePlatform: type: 8-32-120 externalDNS: ['10.10.15.81'] externalNetwork: provider ingressVIP: 10.67.0.7 ingressFloatingIP: 10.10.15.31 publish: External pullSecret: '***' sshKey: '***' \u6dfb\u52a0\u73af\u5883\u53d8\u91cf echo $OPENSHIFT_INSTALL_RELEASE_IMAGE_OVERRIDE 10.10.15.73/utccp-amd64/release:latest \u521b\u5efamanifests\u5e76\u6dfb\u52a0\u79c1\u5e93\u4fe1\u4efb\u5230\u76ee\u5f55 [root@controller uccps-ns]# ./utccp-install create manifests INFO Credentials loaded from file \"/home/jzy/uccps-ns/clouds.yaml\" INFO Consuming Install Config from target directory INFO Manifests created in: manifests and openshift [root@controller uccps-ns]# cp ../cluster-image.yaml manifests/ cluster-image.yaml: \u6267\u884c\u521b\u5efa\u547d\u4ee4 \u8fde\u63a5\u5230\u5f15\u5bfc\u8282\u70b9\u6dfb\u52a0\u514d\u5bc6 sudo vi /etc/containers/registries.conf [[registry]] prefix = \"\" location = \"10.10.15.73\" insecure = true \u91cd\u542f\u65e5\u5fd7\u670d\u52a1\u5feb\u901f\u67e5\u770b\u65e5\u5fd7 sudo systemctl restart systemd-journald \u6709\u95ee\u9898\u7684\u7ec4\u4ef6\uff1a + uccps-ingress + uccps-ingress-operator + uccps-etcd + uccps-dns + uccps-controller-manager-operator + uccps-apiserver","title":"\u6709\u96c0\u642d\u5efa"},{"location":"%E6%9C%89%E9%9B%80/%E9%9C%80%E6%B1%82/%E8%B7%AF%E7%94%B1%E5%90%8D%E7%A7%B0%E6%9B%BF%E6%8D%A2/%E6%90%AD%E5%BB%BA%E6%B5%8B%E8%AF%95/#_1","text":"","title":"\u6709\u96c0\u642d\u5efa"},{"location":"%E6%9C%89%E9%9B%80/%E9%9C%80%E6%B1%82/%E8%B7%AF%E7%94%B1%E5%90%8D%E7%A7%B0%E6%9B%BF%E6%8D%A2/%E6%90%AD%E5%BB%BA%E6%B5%8B%E8%AF%95/#_2","text":"\u521b\u5efa\u5b89\u88c5\u914d\u7f6einstall-config.yaml\u6587\u4ef6\u5982\u4e0b\uff1a apiVersion: v1 baseDomain: jzy.com compute: - architecture: amd64 hyperthreading: Enabled name: worker platform: openstack: zones: ['nova'] type: uccps.small replicas: 2 controlPlane: architecture: amd64 hyperthreading: Enabled name: master platform: openstack: zones: ['nova'] type: uccps.middle replicas: 3 metadata: creationTimestamp: null name: uccps-ns networking: clusterNetwork: - cidr: 10.128.0.0/14 hostPrefix: 23 machineNetwork: - cidr: 10.67.0.0/16 networkType: OpenShiftSDN serviceNetwork: - 172.30.0.0/16 platform: openstack: apiFloatingIP: 10.10.15.120 apiVIP: 10.67.0.5 cloud: openstack clusterOSImage: uswift-20230203-uccps-x86_64 defaultMachinePlatform: type: 8-32-120 externalDNS: ['10.10.15.81'] externalNetwork: provider ingressVIP: 10.67.0.7 ingressFloatingIP: 10.10.15.31 publish: External pullSecret: '***' sshKey: '***' \u6dfb\u52a0\u73af\u5883\u53d8\u91cf echo $OPENSHIFT_INSTALL_RELEASE_IMAGE_OVERRIDE 10.10.15.73/utccp-amd64/release:latest \u521b\u5efamanifests\u5e76\u6dfb\u52a0\u79c1\u5e93\u4fe1\u4efb\u5230\u76ee\u5f55 [root@controller uccps-ns]# ./utccp-install create manifests INFO Credentials loaded from file \"/home/jzy/uccps-ns/clouds.yaml\" INFO Consuming Install Config from target directory INFO Manifests created in: manifests and openshift [root@controller uccps-ns]# cp ../cluster-image.yaml manifests/ cluster-image.yaml: \u6267\u884c\u521b\u5efa\u547d\u4ee4 \u8fde\u63a5\u5230\u5f15\u5bfc\u8282\u70b9\u6dfb\u52a0\u514d\u5bc6 sudo vi /etc/containers/registries.conf [[registry]] prefix = \"\" location = \"10.10.15.73\" insecure = true \u91cd\u542f\u65e5\u5fd7\u670d\u52a1\u5feb\u901f\u67e5\u770b\u65e5\u5fd7 sudo systemctl restart systemd-journald \u6709\u95ee\u9898\u7684\u7ec4\u4ef6\uff1a + uccps-ingress + uccps-ingress-operator + uccps-etcd + uccps-dns + uccps-controller-manager-operator + uccps-apiserver","title":"\u521b\u5efa\u5b89\u88c5\u914d\u7f6e"},{"location":"%E6%9C%89%E9%9B%80/%E9%9C%80%E6%B1%82/%E8%B7%AF%E7%94%B1%E5%90%8D%E7%A7%B0%E6%9B%BF%E6%8D%A2/%E6%9B%BF%E6%8D%A2%E6%AD%A5%E9%AA%A4/","text":"\u66ff\u6362\u6b65\u9aa4 \u00b6 \u547d\u540d\u7a7a\u95f4\u66ff\u6362 \u00b6 \u6267\u884cpython\u811a\u672c\u4e0b\u8f7d\u6240\u6709\u4ee3\u7801\u3002 import os,re,sys from sys import argv type = argv[1] work_dir = \"/root/uccps-scode/\"+content list = [] with open(\"gerrit-repo-\"+content, 'r') as f: for line in f: repo = line.strip(\"\\n\") if repo in list: print(repo) else : list.append(repo) if not os.path.exists(repo): os.chdir(work_dir) os.system(\"git clone \\\"ssh://ut002948@10.30.38.104:29418/%s\\\" && scp -p -P 29418 ut002948@10.30.38.104:hooks/commit-msg \\\"%s/.git/hooks/\\\"\"%(repo,repo)) os.chdir(repo) os.system(\"git checkout v1.2-ns\") os.chdir(work_dir) print(list) \u901a\u8fc7oc get ns\u83b7\u53d6\u5e26\u6709openshift\u7684\u547d\u540d\u7a7a\u95f4\u540d\u79f0\uff0c\u5728\u4ee3\u7801\u4e2d\u7edf\u4e00\u66ff\u6362\u3002 \u4fee\u6539changelog\u5e76\u8fdb\u884c\u4e00\u6b21commit\u3002 sed -i '/\"changelog\":/a\\\\t{\\n\\t \"date\": \"2023-2-16\",\\n\\t \"version\": \"1.2.1-rc9-5\",\\n\\t \"author\": \"jizongyao\",\\n\\t \"changes\": \"change the namespace name\"\\n\\t},' utccp-changelog.json \u91cd\u65b0\u7f16\u8bd1all\u3002 \u6ce8\u610f\uff1a \u00b6 \u9700\u8981\u66f4\u65b0bindata\u7684\u9879\u76ee\u53bb\u5bf9\u5e94\u76ee\u5f55\u4e0b\u6267\u884c ./hack/update-generated-bindata.sh \u811a\u672c utccp-image-cluster-ingress-operator utccp-image-cluster-dns-operator \u95ee\u9898\uff1a \u00b6 \u7528\u4fee\u6539\u8fc7\u547d\u540d\u7a7a\u95f4\u7684utccp-installer\u521b\u5efa\u96c6\u7fa4\uff0c\u65e0\u6cd5\u901a\u8fc7uswift\u7528\u6237\u8fde\u63a5\u5230bootstrap\u8282\u70b9\u3002\u5df2\u89e3\u51b3\uff1a\u5bb9\u5668\u955c\u50cf\u4ee3\u7801\u672a\u66f4\u65b0\uff0c\u4f7f\u7528rpm\u5305\u4fee\u6539\u5b89\u88c5\u3002 \u5b89\u88c5\u540eboostrap\u63d0\u793a\u547d\u540d\u7a7a\u95f4uccps-config\u3001uccps-machine-config-operator\u3001uccps-machine-api\u3001uccps-config-managed\u672a\u627e\u5230\u3002\u5df2\u89e3\u51b3\uff1arelease\u955c\u50cf\u4fee\u6539yaml\u683c\u5f0f\u9519\u8bef\u5bfc\u81f4\u521b\u5efa\u5931\u8d25\u3002","title":"\u66ff\u6362\u6b65\u9aa4"},{"location":"%E6%9C%89%E9%9B%80/%E9%9C%80%E6%B1%82/%E8%B7%AF%E7%94%B1%E5%90%8D%E7%A7%B0%E6%9B%BF%E6%8D%A2/%E6%9B%BF%E6%8D%A2%E6%AD%A5%E9%AA%A4/#_1","text":"","title":"\u66ff\u6362\u6b65\u9aa4"},{"location":"%E6%9C%89%E9%9B%80/%E9%9C%80%E6%B1%82/%E8%B7%AF%E7%94%B1%E5%90%8D%E7%A7%B0%E6%9B%BF%E6%8D%A2/%E6%9B%BF%E6%8D%A2%E6%AD%A5%E9%AA%A4/#_2","text":"\u6267\u884cpython\u811a\u672c\u4e0b\u8f7d\u6240\u6709\u4ee3\u7801\u3002 import os,re,sys from sys import argv type = argv[1] work_dir = \"/root/uccps-scode/\"+content list = [] with open(\"gerrit-repo-\"+content, 'r') as f: for line in f: repo = line.strip(\"\\n\") if repo in list: print(repo) else : list.append(repo) if not os.path.exists(repo): os.chdir(work_dir) os.system(\"git clone \\\"ssh://ut002948@10.30.38.104:29418/%s\\\" && scp -p -P 29418 ut002948@10.30.38.104:hooks/commit-msg \\\"%s/.git/hooks/\\\"\"%(repo,repo)) os.chdir(repo) os.system(\"git checkout v1.2-ns\") os.chdir(work_dir) print(list) \u901a\u8fc7oc get ns\u83b7\u53d6\u5e26\u6709openshift\u7684\u547d\u540d\u7a7a\u95f4\u540d\u79f0\uff0c\u5728\u4ee3\u7801\u4e2d\u7edf\u4e00\u66ff\u6362\u3002 \u4fee\u6539changelog\u5e76\u8fdb\u884c\u4e00\u6b21commit\u3002 sed -i '/\"changelog\":/a\\\\t{\\n\\t \"date\": \"2023-2-16\",\\n\\t \"version\": \"1.2.1-rc9-5\",\\n\\t \"author\": \"jizongyao\",\\n\\t \"changes\": \"change the namespace name\"\\n\\t},' utccp-changelog.json \u91cd\u65b0\u7f16\u8bd1all\u3002","title":"\u547d\u540d\u7a7a\u95f4\u66ff\u6362"},{"location":"%E6%9C%89%E9%9B%80/%E9%9C%80%E6%B1%82/%E8%B7%AF%E7%94%B1%E5%90%8D%E7%A7%B0%E6%9B%BF%E6%8D%A2/%E6%9B%BF%E6%8D%A2%E6%AD%A5%E9%AA%A4/#_3","text":"\u9700\u8981\u66f4\u65b0bindata\u7684\u9879\u76ee\u53bb\u5bf9\u5e94\u76ee\u5f55\u4e0b\u6267\u884c ./hack/update-generated-bindata.sh \u811a\u672c utccp-image-cluster-ingress-operator utccp-image-cluster-dns-operator","title":"\u6ce8\u610f\uff1a"},{"location":"%E6%9C%89%E9%9B%80/%E9%9C%80%E6%B1%82/%E8%B7%AF%E7%94%B1%E5%90%8D%E7%A7%B0%E6%9B%BF%E6%8D%A2/%E6%9B%BF%E6%8D%A2%E6%AD%A5%E9%AA%A4/#_4","text":"\u7528\u4fee\u6539\u8fc7\u547d\u540d\u7a7a\u95f4\u7684utccp-installer\u521b\u5efa\u96c6\u7fa4\uff0c\u65e0\u6cd5\u901a\u8fc7uswift\u7528\u6237\u8fde\u63a5\u5230bootstrap\u8282\u70b9\u3002\u5df2\u89e3\u51b3\uff1a\u5bb9\u5668\u955c\u50cf\u4ee3\u7801\u672a\u66f4\u65b0\uff0c\u4f7f\u7528rpm\u5305\u4fee\u6539\u5b89\u88c5\u3002 \u5b89\u88c5\u540eboostrap\u63d0\u793a\u547d\u540d\u7a7a\u95f4uccps-config\u3001uccps-machine-config-operator\u3001uccps-machine-api\u3001uccps-config-managed\u672a\u627e\u5230\u3002\u5df2\u89e3\u51b3\uff1arelease\u955c\u50cf\u4fee\u6539yaml\u683c\u5f0f\u9519\u8bef\u5bfc\u81f4\u521b\u5efa\u5931\u8d25\u3002","title":"\u95ee\u9898\uff1a"},{"location":"%E7%A4%BE%E5%8C%BA/%E9%BE%99%E6%99%B0/%E4%BA%91%E5%8E%9F%E7%94%9F/%E5%AE%B9%E5%99%A8%E9%95%9C%E5%83%8F%E6%8E%A8%E9%80%81/","text":"\u5bb9\u5668\u955c\u50cf \u00b6 \u793e\u533a\u4ecb\u7ecd \u00b6 https://openanolis.cn/sig/cloud-native/doc/710439246080345867 uos\u5bb9\u5668\u955c\u50cf \u00b6 https://doc.uniontech.com/sheets/e1Az4bwEEgs9z4qW/MODOC","title":"\u5bb9\u5668\u955c\u50cf"},{"location":"%E7%A4%BE%E5%8C%BA/%E9%BE%99%E6%99%B0/%E4%BA%91%E5%8E%9F%E7%94%9F/%E5%AE%B9%E5%99%A8%E9%95%9C%E5%83%8F%E6%8E%A8%E9%80%81/#_1","text":"","title":"\u5bb9\u5668\u955c\u50cf"},{"location":"%E7%A4%BE%E5%8C%BA/%E9%BE%99%E6%99%B0/%E4%BA%91%E5%8E%9F%E7%94%9F/%E5%AE%B9%E5%99%A8%E9%95%9C%E5%83%8F%E6%8E%A8%E9%80%81/#_2","text":"https://openanolis.cn/sig/cloud-native/doc/710439246080345867","title":"\u793e\u533a\u4ecb\u7ecd"},{"location":"%E7%A4%BE%E5%8C%BA/%E9%BE%99%E6%99%B0/%E4%BA%91%E5%8E%9F%E7%94%9F/%E5%AE%B9%E5%99%A8%E9%95%9C%E5%83%8F%E6%8E%A8%E9%80%81/#uos","text":"https://doc.uniontech.com/sheets/e1Az4bwEEgs9z4qW/MODOC","title":"uos\u5bb9\u5668\u955c\u50cf"}]}